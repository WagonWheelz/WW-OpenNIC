server {
    listen 80;
    listen [::]:80;

    server_name factoryporn.parody www.factoryporn.parody;
    root /home/factoryporn/htdocs/factoryporn.parody;

    access_log /home/factoryporn/logs/nginx/access.log main;
    error_log /home/factoryporn/logs/nginx/error.log;

    index index.html;

    # Standard file serving
    location / {
        try_files $uri $uri/ =404;
    }

    # Allow assets to load on other domains (CORS)
    location ~* ^.+\.(css|js|jpg|jpeg|gif|png|ico|gz|svg|svgz|ttf|otf|woff|woff2|eot|mp4|ogg|ogv|webm|webp|zip|swf)$ {
        add_header Access-Control-Allow-Origin "*";
        expires max;
        access_log off;
    }

    # Block access to hidden files (like .git or .env)
    location ~ /\. {
        deny all;
    }
}
